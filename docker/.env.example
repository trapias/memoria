# Memoria Docker Environment Configuration
# Copy this file to .env and customize for your deployment
#
# Note: This file is used by docker-compose to set environment variables
# for the services. Keep sensitive values secure and never commit .env to version control.

# ============================================================================
# PostgreSQL Configuration
# ============================================================================

# Database admin password (change this in production!)
# Used by: postgres service
POSTGRES_PASSWORD=memoria_dev

# Database user name (recommended: don't change)
POSTGRES_USER=memoria

# Database name (recommended: don't change)
POSTGRES_DB=memoria

# PostgreSQL performance tuning
# Adjust these based on your hardware
# For small deployments (< 1GB RAM), use defaults
# For medium deployments (1-4GB RAM), multiply by 2-4
# For large deployments (> 4GB RAM), multiply by 4-8
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_WORK_MEM=10MB

# ============================================================================
# Qdrant Configuration (Optional)
# ============================================================================

# Enable API key authentication for Qdrant (optional)
# If set, include in all Qdrant API requests: -H "api-key: <value>"
# QDRANT_API_KEY=your_secure_api_key_here

# Qdrant snapshot path (for backups)
# QDRANT_SNAPSHOTS_PATH=/qdrant/snapshots

# ============================================================================
# Memoria MCP Server Configuration (HTTP Mode)
# ============================================================================

# HTTP server port (if enabling memoria service in docker-compose.central.yml)
MEMORIA_HTTP_PORT=8765

# HTTP server host
MEMORIA_HTTP_HOST=0.0.0.0

# Qdrant connection (internal to Docker network)
MEMORIA_QDRANT_HOST=qdrant
MEMORIA_QDRANT_PORT=6333

# Ollama server URL (from container perspective)
# For Docker on Linux: http://localhost:11434 or http://host.docker.internal:11434
# For Docker Desktop (Mac/Windows): http://host.docker.internal:11434
MEMORIA_OLLAMA_HOST=http://host.docker.internal:11434

# Embedding model to use with Ollama
MEMORIA_EMBEDDING_MODEL=nomic-embed-text

# Logging level (DEBUG, INFO, WARNING, ERROR)
MEMORIA_LOG_LEVEL=INFO

# Text chunking for long content
MEMORIA_CHUNK_SIZE=500
MEMORIA_CHUNK_OVERLAP=50

# ============================================================================
# Docker Compose Settings
# ============================================================================

# Compose project name (used for container naming and networking)
COMPOSE_PROJECT_NAME=memoria

# ============================================================================
# Production Settings (Uncomment and customize for production)
# ============================================================================

# Use strong password for production
# POSTGRES_PASSWORD=<generate with: openssl rand -base64 32>

# Enable Qdrant API key for security
# QDRANT_API_KEY=<generate with: openssl rand -base64 32>

# Increase PostgreSQL resources for production
# POSTGRES_SHARED_BUFFERS=1GB
# POSTGRES_MAX_CONNECTIONS=200
# POSTGRES_WORK_MEM=50MB

# ============================================================================
# Notes
# ============================================================================
#
# - Keep this file (.env) out of version control
# - Add .env to .gitignore if not already there
# - For each deployment environment, create a separate .env file
#   (e.g., .env.dev, .env.staging, .env.prod)
# - Load specific env file: docker-compose --env-file .env.prod up -d
# - Rotate passwords regularly in production
# - Back up database before major version upgrades
#
